<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{EVENT_TITLE}} - Our Love Story</title>
    <meta name="description" content="{{EVENT_PREVIEW}}">
    
    <!-- Mobile-first responsive design -->
    <meta name="theme-color" content="#e8f0e4">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    
    <!-- Preload critical fonts for performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Dancing+Script:wght@400;700&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- CSS files -->
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../css/timeline.css">
    <link rel="stylesheet" href="../css/responsive.css">
    <link rel="stylesheet" href="../css/event-detail.css">
    
    <!-- Inline critical CSS for immediate visibility -->
    <style>
        /* Critical CSS for event detail pages */
        .event-detail-page {
            background: linear-gradient(135deg, #e8f0e4, #f0f8f0, #f4f9f4);
            min-height: 100vh;
            padding: 0;
            display: block !important;
            visibility: visible !important;
        }
        
        .back-button {
            position: fixed;
            top: 1rem;
            left: 1rem;
            z-index: 1000;
            background: linear-gradient(45deg, #e8f0e4, #f0f8f0);
            color: #2d5a2d;
            border: 2px solid #6b8e5a;
            padding: 0.75rem 1.5rem;
            border-radius: 25px;
            font-size: 1rem;
            font-family: 'Dancing Script', cursive;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(232, 240, 228, 0.4);
            transition: all 0.3s ease;
            min-height: 44px;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .back-button:hover {
            background: linear-gradient(45deg, #f0f8f0, #e6f2e6);
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(232, 240, 228, 0.6);
        }
        
        .event-header {
            background: linear-gradient(135deg, #e8f0e4, #f0f8f0);
            padding: 6rem 2rem 3rem;
            text-align: center;
            position: relative;
            overflow: hidden;
            border-radius: 0 0 30px 30px;
            box-shadow: 0 6px 24px rgba(232, 240, 228, 0.4);
        }
        
        .event-content {
            padding: 3rem 2rem;
            max-width: 800px;
            margin: 0 auto;
        }
    </style>
</head>
<body>
    <!-- Event Detail Page -->
    <main class="event-detail-page">
        <!-- Back to Timeline Button -->
        <button class="back-button" onclick="navigateToTimeline()" title="Back to Timeline">
            <span class="back-icon">üêº</span>
            <span class="back-text">Back to Timeline</span>
        </button>

        <!-- Event Header -->
        <header class="event-header">
            <div class="event-header-content">
                <div class="event-icon-large">{{EVENT_ICON}}</div>
                <h1 class="event-title">{{EVENT_TITLE}}</h1>
                <p class="event-nickname">{{EVENT_NICKNAME}}</p>
                <div class="event-date">{{EVENT_DATE}}</div>
                {{#EVENT_LOCATION}}
                <div class="event-location">
                    <span class="location-icon">üìç</span>
                    <span class="location-text">{{EVENT_LOCATION}}</span>
                </div>
                {{/EVENT_LOCATION}}
            </div>
            
            <!-- Floating Pandas Background -->
            <div class="header-decorations">
                <div class="panda-decoration panda-float-1">üêº</div>
                <div class="panda-decoration panda-float-2">üíï</div>
                <div class="panda-decoration panda-float-3">üêº</div>
                <div class="panda-decoration panda-float-4">üíö</div>
            </div>
        </header>

        <!-- Event Content -->
        <section class="event-content">
            <!-- Event Story -->
            <div class="event-story">
                <div class="story-content">
                    {{EVENT_CONTENT}}
                </div>
            </div>

            <!-- Photo Gallery Section -->
            {{#HAS_PHOTOS}}
            <div class="photo-gallery-section">
                <h2 class="gallery-title">
                    <span class="panda-icon">üêº</span>
                    Our Beautiful Memories
                    <span class="panda-icon">üêº</span>
                </h2>
                <div class="photo-gallery" id="photo-gallery">
                    <!-- Photos will be populated by JavaScript -->
                    {{#PHOTOS}}
                    <div class="photo-item" data-photo-index="{{INDEX}}">
                        <img src="{{URL}}" alt="{{CAPTION}}" class="gallery-photo" loading="lazy">
                        <div class="photo-caption">{{CAPTION}}</div>
                    </div>
                    {{/PHOTOS}}
                </div>
            </div>
            {{/HAS_PHOTOS}}

            <!-- Special Content Section -->
            <div class="special-content-section">
                <h2 class="content-title">
                    <span class="heart-icon">üíï</span>
                    Special Moments
                    <span class="heart-icon">üíï</span>
                </h2>
                
                <!-- Letters/Poems/Quotes Section -->
                <div class="romantic-content">
                    {{#HAS_LETTER}}
                    <div class="content-item letter-content">
                        <h3 class="content-subtitle">A Letter From My Heart</h3>
                        <div class="letter-text">
                            {{LETTER_CONTENT}}
                        </div>
                    </div>
                    {{/HAS_LETTER}}
                    
                    {{#HAS_POEM}}
                    <div class="content-item poem-content">
                        <h3 class="content-subtitle">A Poem For You</h3>
                        <div class="poem-text">
                            {{POEM_CONTENT}}
                        </div>
                    </div>
                    {{/HAS_POEM}}
                    
                    {{#HAS_QUOTE}}
                    <div class="content-item quote-content">
                        <h3 class="content-subtitle">Words That Touch My Heart</h3>
                        <div class="quote-text">
                            "{{QUOTE_CONTENT}}"
                        </div>
                    </div>
                    {{/HAS_QUOTE}}
                </div>
            </div>

            <!-- Navigation to Other Events -->
            <div class="event-navigation">
                <h2 class="nav-title">Explore More Memories</h2>
                <div class="nav-buttons">
                    {{#PREV_EVENT}}
                    <button class="nav-button prev-event" onclick="navigateToEvent('{{PREV_EVENT_ID}}')">
                        <span class="nav-icon">üêº</span>
                        <div class="nav-content">
                            <div class="nav-label">Previous</div>
                            <div class="nav-event-title">{{PREV_EVENT_TITLE}}</div>
                        </div>
                    </button>
                    {{/PREV_EVENT}}
                    
                    <button class="nav-button timeline-button" onclick="navigateToTimeline()">
                        <span class="nav-icon">üíï</span>
                        <div class="nav-content">
                            <div class="nav-label">View All</div>
                            <div class="nav-event-title">Our Timeline</div>
                        </div>
                    </button>
                    
                    {{#NEXT_EVENT}}
                    <button class="nav-button next-event" onclick="navigateToEvent('{{NEXT_EVENT_ID}}')">
                        <span class="nav-icon">üêº</span>
                        <div class="nav-content">
                            <div class="nav-label">Next</div>
                            <div class="nav-event-title">{{NEXT_EVENT_TITLE}}</div>
                        </div>
                    </button>
                    {{/NEXT_EVENT}}
                </div>
            </div>

            <!-- Bookmark Section -->
            <div class="bookmark-section">
                <button class="bookmark-button" id="bookmark-button" onclick="toggleBookmark()">
                    <span class="bookmark-icon">üîñ</span>
                    <span class="bookmark-text">Bookmark This Memory</span>
                </button>
            </div>
        </section>

        <!-- Floating Panda Decorations -->
        <div class="floating-decorations">
            <div class="panda-decoration panda-1">üêº</div>
            <div class="panda-decoration panda-2">üêº</div>
            <div class="panda-decoration panda-3">üêº</div>
            <div class="panda-decoration panda-4">üêº</div>
            <div class="panda-decoration panda-5">üêº</div>
            <div class="panda-decoration panda-6">üêº</div>
        </div>
    </main>

    <!-- JavaScript files -->
    <script src="../data/timeline-data.js"></script>
    <script>
        // Navigation functions
        function navigateToTimeline() {
            window.location.href = '../index.html';
        }
        
        function navigateToEvent(eventId) {
            window.location.href = `event-${eventId}.html`;
        }
        
        // Bookmark functionality
        function toggleBookmark() {
            const button = document.getElementById('bookmark-button');
            const isBookmarked = button.classList.contains('bookmarked');
            
            if (isBookmarked) {
                button.classList.remove('bookmarked');
                button.innerHTML = '<span class="bookmark-icon">üîñ</span><span class="bookmark-text">Bookmark This Memory</span>';
                localStorage.removeItem('bookmarked-{{EVENT_ID}}');
            } else {
                button.classList.add('bookmarked');
                button.innerHTML = '<span class="bookmark-icon">üíñ</span><span class="bookmark-text">Bookmarked!</span>';
                localStorage.setItem('bookmarked-{{EVENT_ID}}', 'true');
            }
        }
        
        // Check if event is bookmarked on page load
        document.addEventListener('DOMContentLoaded', function() {
            const isBookmarked = localStorage.getItem('bookmarked-{{EVENT_ID}}');
            if (isBookmarked) {
                const button = document.getElementById('bookmark-button');
                button.classList.add('bookmarked');
                button.innerHTML = '<span class="bookmark-icon">üíñ</span><span class="bookmark-text">Bookmarked!</span>';
            }
        });
    </script>
    <script src="../js/main.js"></script>
    <script src="../js/event-detail.js"></script>
    <script src="../js/photo-gallery.js"></script>
    <script src="../js/animations.js"></script>
</body>
</html>