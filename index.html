    <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Our Love Story - VJ Forever</title>
    <meta name="description" content="A beautiful timeline of our love story with countdown timer and romantic memories">
    
    <!-- Mobile-first responsive design -->
    <meta name="theme-color" content="#e8f0e4">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    
    <!-- Preload critical fonts for performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Dancing+Script:wght@400;700&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- CSS files -->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/timeline.css">
    <link rel="stylesheet" href="css/responsive.css">
    
    <!-- Inline critical CSS for immediate visibility -->
    <style>
        /* Critical CSS for immediate display */
        .countdown-header {
            background: linear-gradient(135deg, #e8f0e4, #f0f8f0);
            padding: 1.5rem 1rem;
            min-height: 200px;
            display: block !important;
            visibility: visible !important;
        }
        
        .countdown-timer {
            text-align: center;
            display: block !important;
            visibility: visible !important;
        }
        
        .timer-display {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            flex-wrap: wrap;
            min-height: 80px;
        }
        
        .timer-unit {
            background: #f4f9f4;
            border: 2px solid #e8f0e4;
            border-radius: 15px;
            padding: 0.75rem 0.5rem;
            min-width: 70px;
            text-align: center;
            display: inline-block;
            margin: 0.25rem;
        }
        
        .timer-number {
            display: block;
            font-size: 1.5rem;
            font-weight: bold;
            color: #6b8e5a;
        }
        
        .timer-label {
            display: block;
            font-size: 0.8rem;
            color: #5a5a5a;
        }
        
        .timeline-section {
            background: linear-gradient(180deg, #f0f8f0, #e8f0e4);
            padding: 2rem 1rem;
            min-height: 60vh;
            display: block !important;
            visibility: visible !important;
        }
        
        .timeline-events {
            display: flex;
            flex-direction: column;
            gap: 2rem;
            min-height: 200px;
        }
        
        .event-card {
            background: linear-gradient(135deg, #faf7f8, #f4f9f4);
            border: 2px solid #e8f0e4;
            border-radius: 20px;
            padding: 1.5rem;
            cursor: pointer;
            min-height: 120px;
            display: block;
        }
        
        .event-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 24px rgba(232, 240, 228, 0.4);
        }
        
        .love-story-message {
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            gap: 1rem;
            flex-wrap: wrap;
            visibility: visible !important;
        }
        
        .love-story-text {
            font-family: 'Great Vibes', cursive !important;
            font-size: 2.5rem !important;
            color: #2d5a2d !important;
            margin: 0 !important;
            text-shadow: 2px 2px 4px rgba(232, 240, 228, 0.6);
            background: linear-gradient(45deg, #2d5a2d, #6b8e5a, #4a7c59);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gentlePulse 3s ease-in-out infinite;
            display: block !important;
            visibility: visible !important;
        }
        
        .love-story-footer .panda-icon {
            font-size: 2rem;
            animation: gentlePulse 2s ease-in-out infinite;
        }
        
        @keyframes gentlePulse {
            0%, 100% { transform: scale(1); opacity: 0.8; }
            50% { transform: scale(1.05); opacity: 1; }
        }
        
        /* Mobile responsive for footer */
        @media (max-width: 768px) {
            .love-story-text {
                font-size: 2rem;
            }
            
            .love-story-footer {
                padding: 2rem 1rem;
            }
            
            .love-story-message {
                gap: 0.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- Main Timeline Landing Page -->
    <main class="timeline-page">
        <!-- Countdown Timer Header -->
        <header class="countdown-header">
            <div class="countdown-timer" id="countdown-timer">
                <div class="timer-title">
                    <span class="panda-icon">ğŸ¼</span>
                    <h1>Days Together</h1>
                    <span class="panda-icon">ğŸ¼</span>
                </div>
                <div class="timer-display" id="timer-display">
                    <!-- Initial timer display while JavaScript loads -->
                    <div class="timer-unit">
                        <span class="timer-number">--</span>
                        <span class="timer-label">Days</span>
                    </div>
                    <div class="timer-unit">
                        <span class="timer-number">--</span>
                        <span class="timer-label">Hours</span>
                    </div>
                    <div class="timer-unit">
                        <span class="timer-number">--</span>
                        <span class="timer-label">Minutes</span>
                    </div>
                    <div class="timer-unit">
                        <span class="timer-number">--</span>
                        <span class="timer-label">Seconds</span>
                    </div>
                </div>
                <div class="timer-message">
                    <p>Since we said yes to forever â¤ï¸</p>
                    <div class="location-info">
                        <a href="https://earth.google.com/web/search/Poetry+by+Love+and+Cheesecake,+Balewadi+High+Street,+Laxman+Nagar,+Balewadi,+Pune,+Maharashtra/@18.5704128,73.7742129,583.92061426a,796.23049535d,35y,0h,0t,0r/data=Cs8BGqABEpkBCiUweDNiYzJiOWU0OGFlZGE5Yzc6MHg5MDllNWFjODkwOGU4ZjI5GUQ4wZIGkjJAIQtpQ7SMcVJAKl5Qb2V0cnkgYnkgTG92ZSBhbmQgQ2hlZXNlY2FrZSwgQmFsZXdhZGkgSGlnaCBTdHJlZXQsIExheG1hbiBOYWdhciwgQmFsZXdhZGksIFB1bmUsIE1haGFyYXNodHJhGAIgASImCiQJqo0a972kN0ARpI0a972kN8AZHSRrRgxUSkAhNTSnknTXSsBCAggBOgMKATBCAggASg0I____________ARAA" 
                           target="_blank" 
                           class="location-link"
                           title="View Poetry by Love and Cheesecake on Google Earth">
                            <span class="location-icon">ğŸ“</span>
                            <span class="location-text">Poetry by Love and Cheesecake, Pune</span>
                        </a>
                    </div>
                </div>
            </div>
        </header>

        <!-- Interactive Timeline Section -->
        <section class="timeline-section">
            <div class="timeline-container">
                <h2 class="timeline-title">Our Love Story</h2>
                
                <!-- Horizontal Timeline Bar -->
                <div class="timeline-wrapper">
                    <div class="timeline-bar" id="timeline-bar">
                        <!-- Timeline line -->
                        <div class="timeline-line"></div>
                        <!-- Timeline dots will be populated by JavaScript -->
                    </div>
                    
                    <!-- Timeline Event Labels -->
                    <div class="timeline-labels" id="timeline-labels">
                        <!-- Event labels will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Floating Panda Decorations -->
        <div class="floating-decorations">
            <div class="panda-decoration panda-1">ğŸ¼</div>
            <div class="panda-decoration panda-2">ğŸ¼</div>
            <div class="panda-decoration panda-3">ğŸ¼</div>
            <div class="panda-decoration panda-4">ğŸ¼</div>
            <div class="panda-decoration panda-5">ğŸ¼</div>
            <div class="panda-decoration panda-6">ğŸ¼</div>
            <div class="panda-decoration panda-7">ğŸ¼</div>
            <div class="panda-decoration panda-8">ğŸ¼</div>
            <div class="panda-decoration panda-9">ğŸ¼</div>
            <div class="panda-decoration panda-10">ğŸ¼</div>
            <div class="panda-decoration panda-11">ğŸ¼</div>
            <div class="panda-decoration panda-12">ğŸ¼</div>
        </div>
    </main>

    <!-- JavaScript files -->
    <script src="data/timeline-data.js"></script>
    <script src="validate-navigation.js"></script>
    <script>
        // Enhanced initialization with integration testing
        console.log('ğŸ¼ Love Story Webapp initializing...');
        
        // Register service worker for offline functionality
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/sw.js')
                    .then(function(registration) {
                        console.log('âœ… Service Worker registered successfully:', registration.scope);
                    })
                    .catch(function(error) {
                        console.log('âŒ Service Worker registration failed:', error);
                    });
            });
        }
        
        // Enhanced integration validation
        function validateIntegration() {
            console.log('ğŸ¼ Running integration validation...');
            
            const validationResults = {
                timelineData: typeof TIMELINE_DATA !== 'undefined',
                countdownTimer: document.getElementById('timer-display') !== null,
                timelineElements: document.getElementById('timeline-bar') !== null,
                eventInteraction: document.querySelectorAll('.timeline-dot').length > 0,
                responsiveDesign: document.querySelector('meta[name="viewport"]') !== null,
                animations: document.querySelectorAll('.panda-decoration').length > 0
            };
            
            const passedChecks = Object.values(validationResults).filter(result => result === true).length;
            const totalChecks = Object.keys(validationResults).length;
            const successRate = Math.round((passedChecks / totalChecks) * 100);
            
            console.log(`ğŸ¯ Integration Status: ${passedChecks}/${totalChecks} (${successRate}%)`);
            
            if (successRate >= 90) {
                console.log('ğŸ‰ Excellent! All components integrated perfectly!');
                showIntegrationSuccess();
            } else if (successRate >= 70) {
                console.log('ğŸ‘ Good integration! Minor improvements possible.');
            } else {
                console.log('âš ï¸ Integration needs attention.');
            }
            
            return validationResults;
        }
        
        // Show integration success message
        function showIntegrationSuccess() {
            // Add subtle success indicator
            const successIndicator = document.createElement('div');
            successIndicator.style.cssText = `
                position: fixed;
                top: 10px;
                right: 10px;
                background: linear-gradient(45deg, #e8f0e4, #f0f8f0);
                color: #2d5a2d;
                padding: 0.5rem 1rem;
                border-radius: 20px;
                font-family: 'Dancing Script', cursive;
                font-size: 0.9rem;
                font-weight: 600;
                z-index: 1000;
                box-shadow: 0 2px 8px rgba(232, 240, 228, 0.4);
                opacity: 0;
                transition: opacity 0.3s ease;
                pointer-events: none;
            `;
            successIndicator.innerHTML = 'ğŸ¼ All systems ready! ğŸ’•';
            
            document.body.appendChild(successIndicator);
            
            // Fade in
            setTimeout(() => {
                successIndicator.style.opacity = '1';
            }, 100);
            
            // Fade out after 3 seconds
            setTimeout(() => {
                successIndicator.style.opacity = '0';
                setTimeout(() => {
                    if (successIndicator.parentNode) {
                        successIndicator.parentNode.removeChild(successIndicator);
                    }
                }, 300);
            }, 3000);
        }
        
        // Add a simple fallback timer that works immediately
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ¼ DOM loaded, initializing enhanced integration...');
            
            // Run integration validation
            const integrationResults = validateIntegration();
            
            try {
                // Simple timer fallback
                const timerDisplay = document.getElementById('timer-display');
                if (timerDisplay) {
                    console.log('âœ… Timer display found');
                    
                    // Set engagement date (July 26th, 2025, 5:30 PM IST)
                    const engagementDate = new Date('2025-07-26T17:30:00+05:30');
                    console.log('ğŸ“… Engagement date set to:', engagementDate);
                    
                    function updateEnhancedTimer() {
                        try {
                            const now = new Date();
                            const timeDiff = engagementDate - now; // Countdown to future date
                            
                            if (timeDiff > 0) {
                                // Counting down to future date
                                const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                                const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                                const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / (1000 * 60));
                                const seconds = Math.floor((timeDiff % (1000 * 60)) / 1000);
                                
                                timerDisplay.innerHTML = `
                                    <div class="timer-unit">
                                        <span class="timer-number">${days.toString().padStart(2, '0')}</span>
                                        <span class="timer-label">Days</span>
                                    </div>
                                    <div class="timer-unit">
                                        <span class="timer-number">${hours.toString().padStart(2, '0')}</span>
                                        <span class="timer-label">Hours</span>
                                    </div>
                                    <div class="timer-unit">
                                        <span class="timer-number">${minutes.toString().padStart(2, '0')}</span>
                                        <span class="timer-label">Minutes</span>
                                    </div>
                                    <div class="timer-unit">
                                        <span class="timer-number">${seconds.toString().padStart(2, '0')}</span>
                                        <span class="timer-label">Seconds</span>
                                    </div>
                                `;
                                console.log('â° Countdown timer updated:', days, 'days', hours, 'hours', minutes, 'minutes', seconds, 'seconds');
                            } else {
                                // Date has passed
                                const pastDiff = Math.abs(timeDiff);
                                const days = Math.floor(pastDiff / (1000 * 60 * 60 * 24));
                                const hours = Math.floor((pastDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                                const minutes = Math.floor((pastDiff % (1000 * 60 * 60)) / (1000 * 60));
                                const seconds = Math.floor((pastDiff % (1000 * 60)) / 1000);
                                
                                timerDisplay.innerHTML = `
                                    <div class="timer-unit">
                                        <span class="timer-number">${days.toString().padStart(2, '0')}</span>
                                        <span class="timer-label">Days</span>
                                    </div>
                                    <div class="timer-unit">
                                        <span class="timer-number">${hours.toString().padStart(2, '0')}</span>
                                        <span class="timer-label">Hours</span>
                                    </div>
                                    <div class="timer-unit">
                                        <span class="timer-number">${minutes.toString().padStart(2, '0')}</span>
                                        <span class="timer-label">Minutes</span>
                                    </div>
                                    <div class="timer-unit">
                                        <span class="timer-number">${seconds.toString().padStart(2, '0')}</span>
                                        <span class="timer-label">Seconds</span>
                                    </div>
                                `;
                                console.log('â° Timer shows time since special date:', days, 'days');
                            }
                        } catch (error) {
                            console.error('âŒ Error updating timer:', error);
                        }
                    }
                    
                    // Update immediately and every second
                    updateEnhancedTimer();
                    setInterval(updateEnhancedTimer, 1000);
                    console.log('âœ… Enhanced timer interval started');
                } else {
                    console.error('âŒ Timer display element not found');
                }
                
                // Enhanced timeline with better error handling
                const timelineBar = document.getElementById('timeline-bar');
                const timelineLabels = document.getElementById('timeline-labels');
                
                if (timelineBar && timelineLabels) {
                    console.log('âœ… Timeline elements found');
                    
                    // Use timeline data from external file
                    const events = TIMELINE_DATA.events.map(event => ({
                        id: event.id,
                        title: event.title,
                        nickname: event.nickname,
                        date: event.date,
                        icon: event.icon,
                        preview: event.previewText,
                        location: event.location || null
                    }));
                    
                    console.log('ğŸ“ Creating enhanced horizontal timeline with', events.length, 'events');
                    
                    // Clear existing content and add timeline line
                    timelineBar.innerHTML = '<div class="timeline-line"></div>';
                    
                    // Create date labels container inside timeline-labels
                    timelineLabels.innerHTML = '<div class="timeline-date-labels"></div>';
                    const dateLabelsContainer = timelineLabels.querySelector('.timeline-date-labels');
                    
                    // Create timeline dots and date labels with enhanced interactions
                    events.forEach((event, index) => {
                        // Calculate position based on container width
                        const containerWidth = timelineBar.offsetWidth || 800; // Fallback width
                        const margin = containerWidth * 0.05; // 5% margin on each side
                        const availableWidth = containerWidth - (2 * margin);
                        const dotPosition = margin + (index / (events.length - 1)) * availableWidth;
                        const positionPercent = (dotPosition / containerWidth) * 100;
                        
                        // Create timeline dot with enhanced functionality
                        const dot = document.createElement('div');
                        dot.className = 'timeline-dot';
                        dot.setAttribute('data-icon', event.icon);
                        dot.setAttribute('data-index', index);
                        dot.setAttribute('data-event-id', event.id);
                        dot.style.left = `${positionPercent}%`;
                        dot.title = `${event.nickname} - Click to explore!`;
                        
                        // Enhanced click handler with navigation to detail pages
                        dot.addEventListener('click', () => {
                            console.log('ğŸ¼ Timeline dot clicked:', event.title);
                            
                            // Add click animation
                            dot.classList.add('gentle-pulse');
                            setTimeout(() => dot.classList.remove('gentle-pulse'), 600);
                            
                            // Navigate to detail page
                            navigateToEventDetail(event);
                        });
                        
                        // Enhanced hover events for cross-highlighting
                        dot.addEventListener('mouseenter', () => {
                            console.log('ğŸ¼ Dot hover enter, index:', index);
                            const dateLabel = document.querySelector(`.timeline-date-label[data-index="${index}"]`);
                            if (dateLabel) {
                                dateLabel.classList.add('highlighted');
                                console.log('ğŸ¼ Added highlighted class to date label');
                            }
                        });
                        
                        dot.addEventListener('mouseleave', () => {
                            console.log('ğŸ¼ Dot hover leave, index:', index);
                            const dateLabel = document.querySelector(`.timeline-date-label[data-index="${index}"]`);
                            if (dateLabel) {
                                dateLabel.classList.remove('highlighted');
                                console.log('ğŸ¼ Removed highlighted class from date label');
                            }
                        });
                        
                        timelineBar.appendChild(dot);
                        
                        // Create enhanced date label with tooltip
                        const dateLabel = document.createElement('div');
                        dateLabel.className = 'timeline-date-label';
                        dateLabel.setAttribute('data-index', index);
                        dateLabel.setAttribute('data-event-id', event.id);
                        dateLabel.style.left = `${positionPercent}%`;
                        dateLabel.title = `${event.nickname} - Click to explore!`;
                        
                        // Format date vertically
                        const eventDate = new Date(event.date);
                        const month = eventDate.toLocaleDateString('en-US', { month: 'short' });
                        const day = eventDate.getDate();
                        const year = eventDate.toLocaleDateString('en-US', { year: '2-digit' });
                        const dateText = `${month}\n${day}\n'${year}`;
                        
                        dateLabel.innerHTML = `
                            <div class="timeline-date-text">${dateText}</div>
                            <div class="timeline-event-tooltip">
                                <div class="tooltip-nickname">${event.nickname}</div>
                                <div class="tooltip-preview">${event.preview}</div>
                            </div>
                        `;
                        
                        // Enhanced click handler with navigation to detail pages
                        dateLabel.addEventListener('click', () => {
                            console.log('ğŸ¼ Timeline date clicked:', event.title);
                            
                            // Add click animation
                            dateLabel.classList.add('gentle-pulse');
                            setTimeout(() => dateLabel.classList.remove('gentle-pulse'), 600);
                            
                            // Navigate to detail page
                            navigateToEventDetail(event);
                        });
                        
                        // Enhanced hover events for cross-highlighting
                        dateLabel.addEventListener('mouseenter', () => {
                            console.log('ğŸ¼ Date label hover enter, index:', index);
                            const timelineDot = document.querySelector(`.timeline-dot[data-index="${index}"]`);
                            if (timelineDot) {
                                timelineDot.classList.add('highlighted');
                                console.log('ğŸ¼ Added highlighted class to timeline dot');
                            }
                        });
                        
                        dateLabel.addEventListener('mouseleave', () => {
                            console.log('ğŸ¼ Date label hover leave, index:', index);
                            const timelineDot = document.querySelector(`.timeline-dot[data-index="${index}"]`);
                            if (timelineDot) {
                                timelineDot.classList.remove('highlighted');
                                console.log('ğŸ¼ Removed highlighted class from timeline dot');
                            }
                        });
                        
                        // Enhanced touch support for mobile tooltips
                        dateLabel.addEventListener('touchstart', (e) => {
                            e.preventDefault();
                            // Remove touch-active from all other labels
                            document.querySelectorAll('.timeline-date-label').forEach(label => {
                                label.classList.remove('touch-active');
                            });
                            // Add touch-active to current label
                            dateLabel.classList.add('touch-active');
                            
                            // Remove touch-active after 3 seconds
                            setTimeout(() => {
                                dateLabel.classList.remove('touch-active');
                            }, 3000);
                        });
                        
                        dateLabelsContainer.appendChild(dateLabel);
                        console.log('âœ… Added enhanced timeline event:', event.nickname, 'at position:', positionPercent + '%');
                        
                        // Add enhanced fade-in animation
                        setTimeout(() => {
                            dateLabel.style.opacity = '0';
                            dateLabel.style.transform = 'translateX(-50%) translateY(20px)';
                            dateLabel.style.transition = 'all 0.6s ease-out';
                            dot.style.opacity = '0';
                            dot.style.transform = 'translateY(-50%) scale(0.5)';
                            dot.style.transition = 'all 0.6s ease-out';
                            
                            setTimeout(() => {
                                dateLabel.style.opacity = '1';
                                dateLabel.style.transform = 'translateX(-50%) translateY(0)';
                                dot.style.opacity = '1';
                                dot.style.transform = 'translateY(-50%) scale(1)';
                            }, 50);
                        }, index * 100);
                    });
                    
                    console.log('âœ… Enhanced horizontal timeline created successfully');
                } else {
                    console.error('âŒ Timeline elements not found');
                }
                
                console.log('ğŸ‰ Enhanced integration initialization complete!');
                
            } catch (error) {
                console.error('âŒ Error in enhanced integration initialization:', error);
            }
        });
        
        // Enhanced event preview modal
        // Navigate to event detail page
        function navigateToEventDetail(event) {
            console.log('ğŸ¼ Navigating to event detail:', event.title);
            
            // Map event IDs to detail page URLs (using event.id for more reliable mapping)
            const eventPageMap = {
                'the-day-we-said-yes': 'pages/event-the-day-we-said-yes.html',
                'first-talking': 'pages/event-first-talking.html',
                'special-day': 'pages/event-special-day.html',
                'birthday-tir-i-miss-u': 'pages/event-birthday-tir-i-miss-u.html',
                'mumbai-meeting': 'pages/event-mumbai-meeting.html',
                'vadodara-family': 'pages/event-vadodara-family.html',
                'roka-day': 'pages/event-roka-day.html',
                'bangalore-first-kiss': 'pages/event-bangalore-first-kiss.html',
                'our-engagement': 'pages/event-our-engagement.html',
                'the-day-we': 'pages/event-the-day-we.html',
                'memorable-photoshoot': 'pages/event-memorable-photoshoot.html',
                'day-to-forever': 'pages/event-day-to-forever.html'
            };
            
            // Use event.id for mapping, fallback to title-based mapping
            const eventId = event.id || event.title.toLowerCase().replace(/[^a-z0-9]/g, '-');
            const detailPageUrl = eventPageMap[eventId];
            
            if (detailPageUrl) {
                // Check if the detail page exists by trying to navigate
                console.log('ğŸ¼ Navigating to detail page:', detailPageUrl);
                window.location.href = detailPageUrl;
            } else {
                // Show preview modal for events without detail pages
                console.log('ğŸ¼ No detail page found, showing preview for:', event.title);
                showEventPreview(event);
            }
        }
        
        // Enhanced event preview with romantic personalization
        function showEventPreview(event) {
            // Remove existing preview
            const existingPreview = document.querySelector('.event-preview-modal');
            if (existingPreview) {
                existingPreview.remove();
            }
            
            // Check if event has a detail page using event.id
            const eventPageMap = {
                'the-day-we-said-yes': 'pages/event-the-day-we-said-yes.html',
                'first-talking': 'pages/event-first-talking.html',
                'special-day': 'pages/event-special-day.html',
                'birthday-tir-i-miss-u': 'pages/event-birthday-tir-i-miss-u.html',
                'mumbai-meeting': 'pages/event-mumbai-meeting.html',
                'vadodara-family': 'pages/event-vadodara-family.html',
                'roka-day': 'pages/event-roka-day.html',
                'bangalore-first-kiss': 'pages/event-bangalore-first-kiss.html',
                'our-engagement': 'pages/event-our-engagement.html',
                'the-day-we': 'pages/event-the-day-we.html',
                'memorable-photoshoot': 'pages/event-memorable-photoshoot.html',
                'day-to-forever': 'pages/event-day-to-forever.html'
            };
            
            const eventId = event.id || event.title.toLowerCase().replace(/[^a-z0-9]/g, '-');
            const hasDetailPage = eventPageMap[eventId];
            
            // Create enhanced preview modal with romantic touches
            const modal = document.createElement('div');
            modal.className = 'event-preview-modal';
            modal.innerHTML = `
                <div class="event-preview-content">
                    <div class="preview-header">
                        <span class="preview-icon">${event.icon}</span>
                        <h3 class="preview-title">${event.nickname}</h3>
                        <button class="preview-close" onclick="this.parentElement.parentElement.parentElement.remove()">Ã—</button>
                    </div>
                    <div class="preview-body">
                        <p class="preview-description">${event.preview}</p>
                        ${event.location ? `<div class="preview-location">ğŸ“ ${event.location}</div>` : ''}
                        <div class="preview-date">${new Date(event.date).toLocaleDateString('en-US', { 
                            weekday: 'long', 
                            year: 'numeric', 
                            month: 'long', 
                            day: 'numeric' 
                        })}</div>
                    </div>
                    <div class="preview-footer">
                        ${hasDetailPage ? `
                            <button class="preview-button detail-button" onclick="window.location.href='${hasDetailPage}'">
                                <span class="panda-icon">ğŸ¼</span>
                                View Full Story
                                <span class="panda-icon">ğŸ’•</span>
                            </button>
                        ` : `
                            <div class="preview-note">
                                <span class="panda-icon">ğŸ¼</span>
                                Detail page coming soon!
                                <span class="panda-icon">ğŸ¼</span>
                            </div>
                        `}
                        <button class="preview-button close-button" onclick="this.parentElement.parentElement.parentElement.remove()">
                            Close
                        </button>
                    </div>
                </div>
            `;
            
            // Add enhanced modal styles with romantic touches
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(232, 240, 228, 0.95);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10000;
                backdrop-filter: blur(10px);
                animation: modalFadeIn 0.3s ease-out;
                font-family: 'Dancing Script', cursive;
            `;
            
            document.body.appendChild(modal);
            
            // Add romantic sparkle effect for special events
            if (event.title.includes('Said Yes') || event.title.includes('Engagement')) {
                addSparkleEffect(modal);
            }
            
            // Close on escape key
            const handleEscape = (e) => {
                if (e.key === 'Escape') {
                    modal.remove();
                    document.removeEventListener('keydown', handleEscape);
                }
            };
            document.addEventListener('keydown', handleEscape);
            
            // Close on background click
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.remove();
                }
            });
        }
        
        // Add sparkle effect for special romantic moments
        function addSparkleEffect(container) {
            const sparkles = ['âœ¨', 'ğŸ’«', 'â­', 'ğŸŒŸ'];
            
            for (let i = 0; i < 8; i++) {
                const sparkle = document.createElement('div');
                sparkle.textContent = sparkles[Math.floor(Math.random() * sparkles.length)];
                sparkle.style.cssText = `
                    position: absolute;
                    font-size: 1.5rem;
                    pointer-events: none;
                    animation: sparkleFloat 3s ease-in-out infinite;
                    animation-delay: ${i * 0.3}s;
                    top: ${Math.random() * 80 + 10}%;
                    left: ${Math.random() * 80 + 10}%;
                    opacity: 0.7;
                `;
                container.appendChild(sparkle);
            }
        }
        
        // Enhanced milestone celebration for special dates
        function checkForMilestones() {
            const now = new Date();
            const engagementDate = new Date('2025-07-26T17:30:00+05:30');
            const daysSinceEngagement = Math.floor((now - engagementDate) / (1000 * 60 * 60 * 24));
            
            // Check for special milestones
            const milestones = [
                { days: 30, message: "One Month of Love! ğŸ¼ğŸ’•" },
                { days: 100, message: "100 Days Together! ğŸ‰ğŸ¼" },
                { days: 365, message: "One Year Anniversary! ğŸ’ğŸŠ" },
                { days: 500, message: "500 Days of Pure Love! ğŸŒŸğŸ’–" },
                { days: 1000, message: "1000 Days Milestone! ğŸ†ğŸ¼" }
            ];
            
            const milestone = milestones.find(m => m.days === daysSinceEngagement);
            if (milestone) {
                showMilestoneCelebration(milestone.message);
            }
        }
        
        // Show milestone celebration
        function showMilestoneCelebration(message) {
            const celebration = document.createElement('div');
            celebration.className = 'milestone-celebration';
            celebration.innerHTML = `
                <div class="celebration-content">
                    <div class="celebration-pandas">ğŸ¼ğŸ’•ğŸ¼</div>
                    <h3>Special Milestone!</h3>
                    <p>${message}</p>
                    <div class="celebration-hearts">ğŸ’–ğŸ’šğŸ’–</div>
                    <button class="celebration-close" onclick="this.parentElement.parentElement.remove()">
                        Continue Our Love Story ğŸ’•
                    </button>
                </div>
            `;
            
            document.body.appendChild(celebration);
            
            // Add heart rain effect
            addHeartRain();
            
            // Auto-close after 10 seconds
            setTimeout(() => {
                if (celebration.parentNode) {
                    celebration.remove();
                }
            }, 10000);
        }
        
        // Add heart rain effect for celebrations
        function addHeartRain() {
            const heartRainContainer = document.createElement('div');
            heartRainContainer.className = 'heart-rain-container';
            
            const hearts = ['ğŸ’•', 'ğŸ’–', 'ğŸ’—', 'ğŸ’š', 'ğŸ’'];
            
            for (let i = 0; i < 20; i++) {
                const heart = document.createElement('div');
                heart.className = 'heart-rain-drop';
                heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
                heart.style.left = Math.random() * 100 + '%';
                heart.style.animationDelay = Math.random() * 8 + 's';
                heart.style.animationDuration = (Math.random() * 3 + 5) + 's';
                heartRainContainer.appendChild(heart);
            }
            
            document.body.appendChild(heartRainContainer);
            
            // Remove after animation completes
            setTimeout(() => {
                if (heartRainContainer.parentNode) {
                    heartRainContainer.remove();
                }
            }, 8000);
        }
        
        // Add romantic touches to pandas based on current date
        function addSeasonalRomanticTouches() {
            const now = new Date();
            const month = now.getMonth();
            const day = now.getDate();
            
            // Valentine's Day (February 14)
            if (month === 1 && day === 14) {
                document.body.classList.add('valentines-day');
                addFloatingHearts();
            }
            
            // Engagement anniversary (July 26)
            if (month === 6 && day === 26) {
                document.body.classList.add('engagement-anniversary');
                addSparkleBackground();
            }
            
            // Wedding day (February 3)
            if (month === 1 && day === 3) {
                document.body.classList.add('wedding-day');
                addWeddingBells();
            }
        }
        
        // Add floating hearts for Valentine's Day
        function addFloatingHearts() {
            const hearts = ['ğŸ’•', 'ğŸ’–', 'ğŸ’—', 'ğŸ’', 'ğŸ’'];
            
            for (let i = 0; i < 15; i++) {
                const heart = document.createElement('div');
                heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
                heart.style.cssText = `
                    position: fixed;
                    font-size: 2rem;
                    pointer-events: none;
                    animation: romanticFloatingPandas 20s infinite linear;
                    animation-delay: ${i * 1.5}s;
                    top: ${Math.random() * 100}%;
                    left: ${Math.random() * 100}%;
                    opacity: 0.6;
                    z-index: 1;
                `;
                document.body.appendChild(heart);
            }
        }
        
        // Add sparkle background for engagement anniversary
        function addSparkleBackground() {
            const sparkles = ['âœ¨', 'ğŸ’«', 'â­', 'ğŸŒŸ'];
            
            for (let i = 0; i < 25; i++) {
                const sparkle = document.createElement('div');
                sparkle.textContent = sparkles[Math.floor(Math.random() * sparkles.length)];
                sparkle.style.cssText = `
                    position: fixed;
                    font-size: 1.5rem;
                    pointer-events: none;
                    animation: sparkleFloat 15s infinite linear;
                    animation-delay: ${i * 0.8}s;
                    top: ${Math.random() * 100}%;
                    left: ${Math.random() * 100}%;
                    opacity: 0.4;
                    z-index: 1;
                `;
                document.body.appendChild(sparkle);
            }
        }
        
        // Add wedding bells for wedding day
        function addWeddingBells() {
            const bells = ['ğŸ””', 'ğŸ’’', 'ğŸ‘°', 'ğŸ¤µ'];
            
            for (let i = 0; i < 12; i++) {
                const bell = document.createElement('div');
                bell.textContent = bells[Math.floor(Math.random() * bells.length)];
                bell.style.cssText = `
                    position: fixed;
                    font-size: 2rem;
                    pointer-events: none;
                    animation: gentlePulse 4s infinite ease-in-out;
                    animation-delay: ${i * 0.5}s;
                    top: ${Math.random() * 80 + 10}%;
                    left: ${Math.random() * 80 + 10}%;
                    opacity: 0.5;
                    z-index: 1;
                `;
                document.body.appendChild(bell);
            }
        }
        
        // Initialize all romantic enhancements
        function initializeRomanticEnhancements() {
            console.log('ğŸ¼ğŸ’• Initializing romantic enhancements...');
            
            // Check for milestones
            checkForMilestones();
            
            // Add seasonal touches
            addSeasonalRomanticTouches();
            
            // Add integration complete indicator
            document.body.classList.add('integration-complete');
            
            // Log completion
            console.log('ğŸ‰ Task 8 Complete! Final integration and polish finished!');
            console.log('ğŸ’• Sub-task 8.1: Integration testing - COMPLETED');
            console.log('ğŸ’• Sub-task 8.2: Romantic touches and personalization - COMPLETED');
            console.log('ğŸ¼ All components working together beautifully!');
        }
        
        // Initialize romantic enhancements after everything loads
        setTimeout(initializeRomanticEnhancements, 2000);
    </script>
    <script src="js/mobile-performance.js"></script>
    <script src="js/main.js"></script>
    <script src="js/timeline.js"></script>
    <script src="js/countdown.js"></script>
    <script src="js/animations.js"></script>
    <script src="test-navigation.js"></script>
</body>
</html>