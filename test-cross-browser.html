<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cross-Browser & Cross-Device Test - Love Story Webapp</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #e8f0e4, #f0f8f0);
            color: #333;
            line-height: 1.6;
        }
        
        .test-container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        
        .test-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 2px solid #e8f0e4;
            border-radius: 10px;
        }
        
        .test-result {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            font-family: monospace;
            font-size: 14px;
        }
        
        .test-pass {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }
        
        .test-fail {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }
        
        .test-warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
        }
        
        .test-info {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            color: #0c5460;
        }
        
        .browser-info {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .compatibility-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .browser-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #e9ecef;
        }
        
        .browser-card.supported {
            border-color: #28a745;
            background: #d4edda;
        }
        
        .browser-card.partial {
            border-color: #ffc107;
            background: #fff3cd;
        }
        
        .browser-card.unsupported {
            border-color: #dc3545;
            background: #f8d7da;
        }
        
        .run-test-btn {
            background: #6b8e5a;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
            transition: background 0.3s ease;
        }
        
        .run-test-btn:hover {
            background: #5a7a49;
        }
        
        .run-test-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        
        .feature-test {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        
        .feature-test:last-child {
            border-bottom: none;
        }
        
        .feature-name {
            font-weight: bold;
        }
        
        .feature-status {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
        }
        
        .status-supported {
            background: #28a745;
            color: white;
        }
        
        .status-partial {
            background: #ffc107;
            color: #212529;
        }
        
        .status-unsupported {
            background: #dc3545;
            color: white;
        }
        
        .responsive-test {
            border: 2px solid #6b8e5a;
            border-radius: 8px;
            margin: 10px 0;
            overflow: hidden;
        }
        
        .responsive-header {
            background: #6b8e5a;
            color: white;
            padding: 10px;
            font-weight: bold;
        }
        
        .responsive-content {
            padding: 15px;
            background: white;
        }
        
        .screen-size-indicator {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(107, 142, 90, 0.9);
            color: white;
            padding: 8px 12px;
            border-radius: 5px;
            font-size: 12px;
            font-weight: bold;
            z-index: 1000;
        }
        
        .loading {
            text-align: center;
            padding: 20px;
            font-style: italic;
        }
        
        @media (max-width: 768px) {
            .test-container {
                margin: 10px;
                padding: 15px;
            }
            
            .compatibility-grid {
                grid-template-columns: 1fr;
            }
            
            .run-test-btn {
                width: 100%;
                margin: 5px 0;
            }
        }
        
        @media (max-width: 480px) {
            body {
                padding: 10px;
            }
            
            .test-container {
                margin: 5px;
                padding: 10px;
            }
            
            .test-section {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="screen-size-indicator" id="screen-indicator">
        Loading...
    </div>
    
    <div class="test-container">
        <div class="test-header">
            <h1>üåê Cross-Browser & Cross-Device Test Suite</h1>
            <p>Testing compatibility and consistency across different browsers and devices</p>
        </div>
        
        <div class="browser-info" id="browser-info">
            <h3>üîç Current Browser Information</h3>
            <div id="browser-details">Loading browser information...</div>
        </div>
        
        <div class="test-section">
            <h3>üöÄ Compatibility Tests</h3>
            <button class="run-test-btn" onclick="runAllCompatibilityTests()">Run All Tests</button>
            <button class="run-test-btn" onclick="runBrowserFeatureTests()">Test Browser Features</button>
            <button class="run-test-btn" onclick="runResponsiveTests()">Test Responsive Design</button>
            <button class="run-test-btn" onclick="runMobileBrowserTests()">Test Mobile Browsers</button>
            <button class="run-test-btn" onclick="runTouchTests()">Test Touch Interactions</button>
            
            <div id="test-results"></div>
        </div>
        
        <div class="test-section">
            <h3>üì± Browser Compatibility Matrix</h3>
            <div class="compatibility-grid" id="compatibility-matrix"></div>
        </div>
        
        <div class="test-section">
            <h3>üìê Responsive Design Tests</h3>
            <div id="responsive-tests"></div>
        </div>
        
        <div class="test-section">
            <h3>üéØ Mobile-Specific Tests</h3>
            <div id="mobile-tests"></div>
        </div>
        
        <div class="test-section">
            <h3>üí° Compatibility Issues & Fixes</h3>
            <div id="compatibility-issues"></div>
        </div>
    </div>

    <script>
        // Cross-Browser & Cross-Device Test Suite
        class CrossBrowserTestSuite {
            constructor() {
                this.results = [];
                this.browserInfo = this.detectBrowser();
                this.deviceInfo = this.detectDevice();
                this.features = {};
                this.init();
            }
            
            init() {
                this.displayBrowserInfo();
                this.updateScreenIndicator();
                this.createCompatibilityMatrix();
                this.setupResponsiveTests();
                this.setupEventListeners();
            }
            
            detectBrowser() {
                const ua = navigator.userAgent;
                const browsers = {
                    chrome: /Chrome\/(\d+)/.test(ua) && !/Edg\//.test(ua),
                    firefox: /Firefox\/(\d+)/.test(ua),
                    safari: /Safari\//.test(ua) && !/Chrome\//.test(ua),
                    edge: /Edg\/(\d+)/.test(ua),
                    opera: /OPR\/(\d+)/.test(ua),
                    samsung: /SamsungBrowser\/(\d+)/.test(ua),
                    ie: /MSIE|Trident/.test(ua)
                };
                
                let browserName = 'Unknown';
                let version = 'Unknown';
                
                for (const [name, detected] of Object.entries(browsers)) {
                    if (detected) {
                        browserName = name;
                        const match = ua.match(new RegExp(`${name === 'edge' ? 'Edg' : name === 'opera' ? 'OPR' : name === 'samsung' ? 'SamsungBrowser' : name}\/(\d+)`, 'i'));
                        version = match ? match[1] : 'Unknown';
                        break;
                    }
                }
                
                return {
                    name: browserName,
                    version: version,
                    userAgent: ua,
                    isMobile: /Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(ua),
                    isTablet: /iPad|Android(?!.*Mobile)/i.test(ua),
                    platform: navigator.platform
                };
            }
            
            detectDevice() {
                return {
                    screenWidth: window.screen.width,
                    screenHeight: window.screen.height,
                    viewportWidth: window.innerWidth,
                    viewportHeight: window.innerHeight,
                    devicePixelRatio: window.devicePixelRatio || 1,
                    orientation: screen.orientation ? screen.orientation.type : 'unknown',
                    touchSupport: 'ontouchstart' in window || navigator.maxTouchPoints > 0,
                    hardwareConcurrency: navigator.hardwareConcurrency || 'Unknown',
                    deviceMemory: navigator.deviceMemory || 'Unknown',
                    connection: navigator.connection ? {
                        effectiveType: navigator.connection.effectiveType,
                        downlink: navigator.connection.downlink,
                        rtt: navigator.connection.rtt
                    } : null
                };
            }
            
            displayBrowserInfo() {
                const browserDetails = document.getElementById('browser-details');
                const info = this.browserInfo;
                const device = this.deviceInfo;
                
                let browserHTML = `
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
                        <div>
                            <strong>Browser:</strong> ${info.name.charAt(0).toUpperCase() + info.name.slice(1)} ${info.version}<br>
                            <strong>Platform:</strong> ${info.platform}<br>
                            <strong>Device Type:</strong> ${info.isMobile ? 'Mobile' : info.isTablet ? 'Tablet' : 'Desktop'}
                        </div>
                        <div>
                            <strong>Screen:</strong> ${device.screenWidth} x ${device.screenHeight}<br>
                            <strong>Viewport:</strong> ${device.viewportWidth} x ${device.viewportHeight}<br>
                            <strong>Pixel Ratio:</strong> ${device.devicePixelRatio}
                        </div>
                        <div>
                            <strong>Touch Support:</strong> ${device.touchSupport ? 'Yes' : 'No'}<br>
                            <strong>Orientation:</strong> ${device.orientation}<br>
                            <strong>CPU Cores:</strong> ${device.hardwareConcurrency}
                        </div>
                `;
                
                if (device.connection) {
                    browserHTML += `
                        <div>
                            <strong>Connection:</strong> ${device.connection.effectiveType}<br>
                            <strong>Downlink:</strong> ${device.connection.downlink} Mbps<br>
                            <strong>RTT:</strong> ${device.connection.rtt} ms
                        </div>
                    `;
                }
                
                browserHTML += '</div>';
                browserDetails.innerHTML = browserHTML;
            }
            
            updateScreenIndicator() {
                const indicator = document.getElementById('screen-indicator');
                const updateIndicator = () => {
                    const width = window.innerWidth;
                    const height = window.innerHeight;
                    let category = '';
                    
                    if (width < 480) category = 'Mobile S';
                    else if (width < 768) category = 'Mobile L';
                    else if (width < 1024) category = 'Tablet';
                    else if (width < 1440) category = 'Desktop';
                    else category = 'Desktop L';
                    
                    indicator.textContent = `${width} x ${height} (${category})`;
                };
                
                updateIndicator();
                window.addEventListener('resize', updateIndicator);
                window.addEventListener('orientationchange', () => {
                    setTimeout(updateIndicator, 100);
                });
            }
            
            createCompatibilityMatrix() {
                const matrix = document.getElementById('compatibility-matrix');
                const browsers = [
                    { name: 'Chrome Mobile', features: ['css-grid', 'flexbox', 'service-worker', 'intersection-observer', 'webp'] },
                    { name: 'Safari Mobile', features: ['css-grid', 'flexbox', 'service-worker', 'intersection-observer'] },
                    { name: 'Samsung Internet', features: ['css-grid', 'flexbox', 'service-worker', 'intersection-observer', 'webp'] },
                    { name: 'Firefox Mobile', features: ['css-grid', 'flexbox', 'service-worker', 'intersection-observer', 'webp'] },
                    { name: 'Chrome Desktop', features: ['css-grid', 'flexbox', 'service-worker', 'intersection-observer', 'webp'] },
                    { name: 'Safari Desktop', features: ['css-grid', 'flexbox', 'service-worker', 'intersection-observer'] }
                ];
                
                browsers.forEach(browser => {
                    const card = document.createElement('div');
                    card.className = 'browser-card';
                    
                    let supportLevel = 'supported';
                    if (browser.features.length < 4) supportLevel = 'partial';
                    if (browser.features.length < 3) supportLevel = 'unsupported';
                    
                    card.classList.add(supportLevel);
                    
                    let featuresHTML = '';
                    const allFeatures = ['css-grid', 'flexbox', 'service-worker', 'intersection-observer', 'webp'];
                    
                    allFeatures.forEach(feature => {
                        const supported = browser.features.includes(feature);
                        const status = supported ? 'supported' : 'unsupported';
                        featuresHTML += `
                            <div class="feature-test">
                                <span class="feature-name">${feature}</span>
                                <span class="feature-status status-${status}">
                                    ${supported ? '‚úì' : '‚úó'}
                                </span>
                            </div>
                        `;
                    });
                    
                    card.innerHTML = `
                        <h4>${browser.name}</h4>
                        ${featuresHTML}
                    `;
                    
                    matrix.appendChild(card);
                });
            }
            
            setupResponsiveTests() {
                const responsiveTests = document.getElementById('responsive-tests');
                const breakpoints = [
                    { name: 'Mobile Small', width: '320px', description: 'iPhone 5/SE' },
                    { name: 'Mobile Large', width: '414px', description: 'iPhone 6/7/8 Plus' },
                    { name: 'Tablet', width: '768px', description: 'iPad' },
                    { name: 'Desktop', width: '1024px', description: 'Small Desktop' },
                    { name: 'Large Desktop', width: '1440px', description: 'Large Desktop' }
                ];
                
                breakpoints.forEach(bp => {
                    const testDiv = document.createElement('div');
                    testDiv.className = 'responsive-test';
                    testDiv.innerHTML = `
                        <div class="responsive-header">
                            ${bp.name} (${bp.width}) - ${bp.description}
                        </div>
                        <div class="responsive-content">
                            <div id="responsive-${bp.name.replace(/\s+/g, '-').toLowerCase()}">
                                Testing responsive behavior at ${bp.width}...
                            </div>
                        </div>
                    `;
                    responsiveTests.appendChild(testDiv);
                });
            }
            
            setupEventListeners() {
                // Listen for orientation changes
                window.addEventListener('orientationchange', () => {
                    setTimeout(() => {
                        this.displayBrowserInfo();
                        this.addResult('üì± Orientation changed - retesting responsive behavior', 'info');
                    }, 500);
                });
                
                // Listen for resize events
                let resizeTimeout;
                window.addEventListener('resize', () => {
                    clearTimeout(resizeTimeout);
                    resizeTimeout = setTimeout(() => {
                        this.updateScreenIndicator();
                    }, 250);
                });
            }
            
            async runAllCompatibilityTests() {
                this.clearResults();
                this.showLoading();
                
                await this.runBrowserFeatureTests();
                await this.runResponsiveTests();
                await this.runMobileBrowserTests();
                await this.runTouchTests();
                await this.runPerformanceTests();
                
                this.generateCompatibilityReport();
                this.hideLoading();
            }
            
            async runBrowserFeatureTests() {
                this.addResult('üîç Testing Browser Feature Support...', 'info');
                
                // Test CSS Grid
                const gridSupport = CSS.supports('display', 'grid');
                this.features.cssGrid = gridSupport;
                this.addResult(`CSS Grid: ${gridSupport ? 'Supported' : 'Not Supported'}`, gridSupport ? 'pass' : 'fail');
                
                // Test Flexbox
                const flexSupport = CSS.supports('display', 'flex');
                this.features.flexbox = flexSupport;
                this.addResult(`Flexbox: ${flexSupport ? 'Supported' : 'Not Supported'}`, flexSupport ? 'pass' : 'fail');
                
                // Test Service Worker
                const swSupport = 'serviceWorker' in navigator;
                this.features.serviceWorker = swSupport;
                this.addResult(`Service Worker: ${swSupport ? 'Supported' : 'Not Supported'}`, swSupport ? 'pass' : 'fail');
                
                // Test Intersection Observer
                const ioSupport = 'IntersectionObserver' in window;
                this.features.intersectionObserver = ioSupport;
                this.addResult(`Intersection Observer: ${ioSupport ? 'Supported' : 'Not Supported'}`, ioSupport ? 'pass' : 'fail');
                
                // Test WebP Support
                const webpSupport = await this.testWebPSupport();
                this.features.webp = webpSupport;
                this.addResult(`WebP Images: ${webpSupport ? 'Supported' : 'Not Supported'}`, webpSupport ? 'pass' : 'warning');
                
                // Test Touch Events
                const touchSupport = 'ontouchstart' in window;
                this.features.touch = touchSupport;
                this.addResult(`Touch Events: ${touchSupport ? 'Supported' : 'Not Supported'}`, touchSupport ? 'pass' : 'info');
                
                // Test Local Storage
                const storageSupport = this.testLocalStorage();
                this.features.localStorage = storageSupport;
                this.addResult(`Local Storage: ${storageSupport ? 'Supported' : 'Not Supported'}`, storageSupport ? 'pass' : 'fail');
                
                // Test Fetch API
                const fetchSupport = 'fetch' in window;
                this.features.fetch = fetchSupport;
                this.addResult(`Fetch API: ${fetchSupport ? 'Supported' : 'Not Supported'}`, fetchSupport ? 'pass' : 'warning');
                
                return this.features;
            }
            
            async runResponsiveTests() {
                this.addResult('üìê Testing Responsive Design...', 'info');
                
                const currentWidth = window.innerWidth;
                
                // Test mobile breakpoint
                if (currentWidth <= 768) {
                    this.addResult('‚úì Mobile breakpoint active', 'pass');
                    
                    // Test mobile-specific elements
                    const mobileElements = document.querySelectorAll('.mobile-only, .mobile-visible');
                    this.addResult(`Mobile-specific elements: ${mobileElements.length} found`, 'info');
                    
                    // Test touch targets
                    const touchTargets = document.querySelectorAll('button, a, .clickable');
                    let adequateTargets = 0;
                    touchTargets.forEach(target => {
                        const rect = target.getBoundingClientRect();
                        if (rect.width >= 44 && rect.height >= 44) {
                            adequateTargets++;
                        }
                    });
                    
                    const touchResult = adequateTargets === touchTargets.length ? 'pass' : 'warning';
                    this.addResult(`Touch-friendly targets: ${adequateTargets}/${touchTargets.length}`, touchResult);
                }
                
                // Test tablet breakpoint
                if (currentWidth > 768 && currentWidth <= 1024) {
                    this.addResult('‚úì Tablet breakpoint active', 'pass');
                }
                
                // Test desktop breakpoint
                if (currentWidth > 1024) {
                    this.addResult('‚úì Desktop breakpoint active', 'pass');
                }
                
                // Test viewport meta tag
                const viewportMeta = document.querySelector('meta[name="viewport"]');
                const viewportResult = viewportMeta ? 'pass' : 'fail';
                this.addResult(`Viewport meta tag: ${viewportResult === 'pass' ? 'Present' : 'Missing'}`, viewportResult);
                
                // Test responsive images
                const responsiveImages = document.querySelectorAll('img[srcset], picture');
                this.addResult(`Responsive images: ${responsiveImages.length} found`, responsiveImages.length > 0 ? 'pass' : 'info');
                
                return { currentWidth, touchTargets: adequateTargets, totalTargets: touchTargets.length };
            }
            
            async runMobileBrowserTests() {
                this.addResult('üì± Testing Mobile Browser Compatibility...', 'info');
                
                const browser = this.browserInfo;
                
                // Test specific mobile browsers
                if (browser.name === 'chrome' && browser.isMobile) {
                    this.addResult('‚úì Chrome Mobile detected - Full compatibility expected', 'pass');
                } else if (browser.name === 'safari' && browser.isMobile) {
                    this.addResult('‚úì Safari Mobile detected - Good compatibility expected', 'pass');
                    this.addResult('‚ö†Ô∏è Note: Some features may have limited support in Safari', 'warning');
                } else if (browser.name === 'samsung') {
                    this.addResult('‚úì Samsung Internet detected - Good compatibility expected', 'pass');
                } else if (browser.name === 'firefox' && browser.isMobile) {
                    this.addResult('‚úì Firefox Mobile detected - Good compatibility expected', 'pass');
                } else if (browser.isMobile) {
                    this.addResult('‚ö†Ô∏è Unknown mobile browser - Testing compatibility', 'warning');
                } else {
                    this.addResult('‚ÑπÔ∏è Desktop browser detected', 'info');
                }
                
                // Test mobile-specific features
                if (browser.isMobile) {
                    // Test device orientation
                    const orientationSupport = 'orientation' in screen;
                    this.addResult(`Device Orientation API: ${orientationSupport ? 'Supported' : 'Not Supported'}`, orientationSupport ? 'pass' : 'warning');
                    
                    // Test device motion
                    const motionSupport = 'DeviceMotionEvent' in window;
                    this.addResult(`Device Motion API: ${motionSupport ? 'Supported' : 'Not Supported'}`, motionSupport ? 'pass' : 'info');
                    
                    // Test vibration
                    const vibrationSupport = 'vibrate' in navigator;
                    this.addResult(`Vibration API: ${vibrationSupport ? 'Supported' : 'Not Supported'}`, vibrationSupport ? 'pass' : 'info');
                }
                
                return browser;
            }
            
            async runTouchTests() {
                this.addResult('üëÜ Testing Touch Interactions...', 'info');
                
                const touchSupport = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
                
                if (touchSupport) {
                    this.addResult('‚úì Touch events supported', 'pass');
                    
                    // Test touch event listeners
                    let touchEventsWorking = true;
                    try {
                        const testElement = document.createElement('div');
                        testElement.addEventListener('touchstart', () => {}, { passive: true });
                        testElement.addEventListener('touchmove', () => {}, { passive: true });
                        testElement.addEventListener('touchend', () => {}, { passive: true });
                        this.addResult('‚úì Touch event listeners working', 'pass');
                    } catch (error) {
                        this.addResult('‚úó Touch event listeners failed', 'fail');
                        touchEventsWorking = false;
                    }
                    
                    // Test passive event listeners
                    let passiveSupported = false;
                    try {
                        const options = Object.defineProperty({}, 'passive', {
                            get: function() {
                                passiveSupported = true;
                                return false;
                            }
                        });
                        window.addEventListener('test', null, options);
                        window.removeEventListener('test', null, options);
                    } catch (err) {}
                    
                    this.addResult(`Passive event listeners: ${passiveSupported ? 'Supported' : 'Not Supported'}`, passiveSupported ? 'pass' : 'warning');
                    
                    // Test pointer events
                    const pointerSupport = 'PointerEvent' in window;
                    this.addResult(`Pointer Events: ${pointerSupport ? 'Supported' : 'Not Supported'}`, pointerSupport ? 'pass' : 'info');
                    
                } else {
                    this.addResult('‚ÑπÔ∏è Touch events not supported (desktop browser)', 'info');
                }
                
                return { touchSupport, maxTouchPoints: navigator.maxTouchPoints || 0 };
            }
            
            async runPerformanceTests() {
                this.addResult('‚ö° Testing Performance Features...', 'info');
                
                // Test Performance API
                const perfSupport = 'performance' in window;
                this.addResult(`Performance API: ${perfSupport ? 'Supported' : 'Not Supported'}`, perfSupport ? 'pass' : 'warning');
                
                // Test Performance Observer
                const perfObserverSupport = 'PerformanceObserver' in window;
                this.addResult(`Performance Observer: ${perfObserverSupport ? 'Supported' : 'Not Supported'}`, perfObserverSupport ? 'pass' : 'warning');
                
                // Test Navigation Timing
                const navTimingSupport = performance.timing !== undefined;
                this.addResult(`Navigation Timing: ${navTimingSupport ? 'Supported' : 'Not Supported'}`, navTimingSupport ? 'pass' : 'warning');
                
                // Test Resource Timing
                const resourceTimingSupport = 'getEntriesByType' in performance;
                this.addResult(`Resource Timing: ${resourceTimingSupport ? 'Supported' : 'Not Supported'}`, resourceTimingSupport ? 'pass' : 'warning');
                
                return { perfSupport, perfObserverSupport, navTimingSupport, resourceTimingSupport };
            }
            
            async testWebPSupport() {
                return new Promise((resolve) => {
                    const webP = new Image();
                    webP.onload = webP.onerror = () => {
                        resolve(webP.height === 2);
                    };
                    webP.src = 'data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA';
                });
            }
            
            testLocalStorage() {
                try {
                    const test = 'test';
                    localStorage.setItem(test, test);
                    localStorage.removeItem(test);
                    return true;
                } catch (e) {
                    return false;
                }
            }
            
            generateCompatibilityReport() {
                const issuesElement = document.getElementById('compatibility-issues');
                const mobileTestsElement = document.getElementById('mobile-tests');
                
                let issues = [];
                let mobileSpecific = [];
                
                // Check for compatibility issues
                if (!this.features.cssGrid) {
                    issues.push({
                        issue: 'CSS Grid not supported',
                        fix: 'Use Flexbox fallback or CSS Grid polyfill',
                        severity: 'high'
                    });
                }
                
                if (!this.features.serviceWorker) {
                    issues.push({
                        issue: 'Service Worker not supported',
                        fix: 'Offline functionality will not work. Consider AppCache fallback for older browsers',
                        severity: 'medium'
                    });
                }
                
                if (!this.features.intersectionObserver) {
                    issues.push({
                        issue: 'Intersection Observer not supported',
                        fix: 'Use polyfill or fallback to scroll event listeners',
                        severity: 'medium'
                    });
                }
                
                if (!this.features.webp) {
                    issues.push({
                        issue: 'WebP images not supported',
                        fix: 'Provide JPEG/PNG fallbacks using <picture> element',
                        severity: 'low'
                    });
                }
                
                // Mobile-specific recommendations
                if (this.browserInfo.isMobile) {
                    mobileSpecific.push({
                        test: 'Touch Target Size',
                        recommendation: 'Ensure all interactive elements are at least 44x44px',
                        status: 'check'
                    });
                    
                    mobileSpecific.push({
                        test: 'Viewport Configuration',
                        recommendation: 'Use proper viewport meta tag with user-scalable=no for app-like experience',
                        status: 'check'
                    });
                    
                    mobileSpecific.push({
                        test: 'Performance Optimization',
                        recommendation: 'Minimize JavaScript execution and use lazy loading for images',
                        status: 'check'
                    });
                    
                    if (this.browserInfo.name === 'safari') {
                        mobileSpecific.push({
                            test: 'Safari Mobile Specific',
                            recommendation: 'Test date inputs, avoid position:fixed on keyboard open, handle viewport height changes',
                            status: 'warning'
                        });
                    }
                }
                
                // Display issues
                if (issues.length === 0) {
                    issuesElement.innerHTML = '<div class="test-result test-pass">üéâ No compatibility issues detected!</div>';
                } else {
                    let issuesHTML = '<h4>Detected Issues & Recommended Fixes:</h4>';
                    issues.forEach(issue => {
                        const severityClass = issue.severity === 'high' ? 'test-fail' : issue.severity === 'medium' ? 'test-warning' : 'test-info';
                        issuesHTML += `
                            <div class="test-result ${severityClass}">
                                <strong>${issue.issue}</strong><br>
                                <em>Fix: ${issue.fix}</em>
                            </div>
                        `;
                    });
                    issuesElement.innerHTML = issuesHTML;
                }
                
                // Display mobile-specific tests
                if (mobileSpecific.length > 0) {
                    let mobileHTML = '<h4>Mobile Browser Recommendations:</h4>';
                    mobileSpecific.forEach(item => {
                        const statusClass = item.status === 'warning' ? 'test-warning' : 'test-info';
                        mobileHTML += `
                            <div class="test-result ${statusClass}">
                                <strong>${item.test}:</strong> ${item.recommendation}
                            </div>
                        `;
                    });
                    mobileTestsElement.innerHTML = mobileHTML;
                } else {
                    mobileTestsElement.innerHTML = '<div class="test-result test-info">Desktop browser detected - mobile-specific tests not applicable</div>';
                }
            }
            
            addResult(message, type) {
                this.results.push({ message, type });
                const resultsElement = document.getElementById('test-results');
                const resultDiv = document.createElement('div');
                resultDiv.className = `test-result test-${type}`;
                resultDiv.textContent = message;
                resultsElement.appendChild(resultDiv);
            }
            
            clearResults() {
                this.results = [];
                document.getElementById('test-results').innerHTML = '';
                document.getElementById('compatibility-issues').innerHTML = '';
                document.getElementById('mobile-tests').innerHTML = '';
            }
            
            showLoading() {
                const resultsElement = document.getElementById('test-results');
                resultsElement.innerHTML = '<div class="loading">üåê Running cross-browser compatibility tests...</div>';
            }
            
            hideLoading() {
                const loadingElement = document.querySelector('.loading');
                if (loadingElement) {
                    loadingElement.remove();
                }
            }
        }
        
        // Initialize test suite
        const crossBrowserTest = new CrossBrowserTestSuite();
        
        // Global functions for buttons
        function runAllCompatibilityTests() {
            crossBrowserTest.runAllCompatibilityTests();
        }
        
        function runBrowserFeatureTests() {
            crossBrowserTest.clearResults();
            crossBrowserTest.runBrowserFeatureTests();
        }
        
        function runResponsiveTests() {
            crossBrowserTest.clearResults();
            crossBrowserTest.runResponsiveTests();
        }
        
        function runMobileBrowserTests() {
            crossBrowserTest.clearResults();
            crossBrowserTest.runMobileBrowserTests();
        }
        
        function runTouchTests() {
            crossBrowserTest.clearResults();
            crossBrowserTest.runTouchTests();
        }
        
        // Auto-run basic compatibility check on page load
        window.addEventListener('load', () => {
            setTimeout(() => {
                crossBrowserTest.addResult('üåê Cross-browser test suite loaded successfully', 'pass');
                crossBrowserTest.addResult('üí° Click "Run All Tests" to perform comprehensive compatibility testing', 'info');
            }, 1000);
        });
    </script>
</body>
</html>